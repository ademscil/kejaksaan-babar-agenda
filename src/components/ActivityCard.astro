---
interface Props {
  title: string;
  date: Date;
  category: string;
  excerpt: string;
  coverImage: string;
  slug: string;
  tags?: string[];
}

const { title, date, category, excerpt, coverImage, slug, tags = [] } = Astro.props;

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('id-ID', { 
    day: 'numeric', 
    month: 'long', 
    year: 'numeric' 
  }).format(date);
};

const categoryColors: Record<string, string> = {
  'Pengajian': 'bg-emerald-100 text-emerald-700',
  'Penyuluhan Hukum': 'bg-blue-100 text-blue-700',
  'Kunjungan Kerja': 'bg-purple-100 text-purple-700',
  'Rapat Koordinasi': 'bg-orange-100 text-orange-700',
  'Upacara': 'bg-red-100 text-red-700',
  'Bakti Sosial': 'bg-pink-100 text-pink-700',
  'Lainnya': 'bg-gray-100 text-gray-700',
};
---

<article class="group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
  <a href={`/kegiatan/${slug}`} class="block">
    <div class="aspect-[16/10] overflow-hidden bg-gray-100">
      <img 
        src={coverImage} 
        alt={title}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
        loading="lazy"
      />
    </div>
    <div class="p-6">
      <div class="flex items-center gap-3 mb-3">
        <span class={`px-3 py-1 rounded-full text-xs font-medium ${categoryColors[category] || categoryColors['Lainnya']}`}>
          {category}
        </span>
        <time class="text-sm text-gray-500">{formatDate(date)}</time>
      </div>
      <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors line-clamp-2">
        {title}
      </h3>
      <p class="text-gray-600 text-sm line-clamp-3 mb-4">
        {excerpt}
      </p>
      {tags.length > 0 && (
        <div class="flex flex-wrap gap-2">
          {tags.slice(0, 3).map(tag => (
            <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-lg">
              #{tag}
            </span>
          ))}
        </div>
      )}
    </div>
  </a>
</article>
